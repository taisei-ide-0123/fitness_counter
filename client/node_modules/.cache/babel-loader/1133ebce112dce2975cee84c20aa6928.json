{"ast":null,"code":"(function ($) {\n  'use strict';\n\n  let _defaults = {\n    duration: 200,\n    // ms\n    dist: -100,\n    // zoom scale TODO: make this more intuitive as an option\n    shift: 0,\n    // spacing for center image\n    padding: 0,\n    // Padding between non center items\n    numVisible: 5,\n    // Number of visible items in carousel\n    fullWidth: false,\n    // Change to full width styles\n    indicators: false,\n    // Toggle indicators\n    noWrap: false,\n    // Don't wrap around and cycle through items.\n    onCycleTo: null // Callback for when a new slide is cycled to.\n\n  };\n  /**\n   * @class\n   *\n   */\n\n  class Carousel extends Component {\n    /**\n     * Construct Carousel instance\n     * @constructor\n     * @param {Element} el\n     * @param {Object} options\n     */\n    constructor(el, options) {\n      super(Carousel, el, options);\n      this.el.M_Carousel = this;\n      /**\n       * Options for the carousel\n       * @member Carousel#options\n       * @prop {Number} duration\n       * @prop {Number} dist\n       * @prop {Number} shift\n       * @prop {Number} padding\n       * @prop {Number} numVisible\n       * @prop {Boolean} fullWidth\n       * @prop {Boolean} indicators\n       * @prop {Boolean} noWrap\n       * @prop {Function} onCycleTo\n       */\n\n      this.options = $.extend({}, Carousel.defaults, options); // Setup\n\n      this.hasMultipleSlides = this.$el.find('.carousel-item').length > 1;\n      this.showIndicators = this.options.indicators && this.hasMultipleSlides;\n      this.noWrap = this.options.noWrap || !this.hasMultipleSlides;\n      this.pressed = false;\n      this.dragged = false;\n      this.offset = this.target = 0;\n      this.images = [];\n      this.itemWidth = this.$el.find('.carousel-item').first().innerWidth();\n      this.itemHeight = this.$el.find('.carousel-item').first().innerHeight();\n      this.dim = this.itemWidth * 2 + this.options.padding || 1; // Make sure dim is non zero for divisions.\n\n      this._autoScrollBound = this._autoScroll.bind(this);\n      this._trackBound = this._track.bind(this); // Full Width carousel setup\n\n      if (this.options.fullWidth) {\n        this.options.dist = 0;\n\n        this._setCarouselHeight(); // Offset fixed items when indicators.\n\n\n        if (this.showIndicators) {\n          this.$el.find('.carousel-fixed-item').addClass('with-indicators');\n        }\n      } // Iterate through slides\n\n\n      this.$indicators = $('<ul class=\"indicators\"></ul>');\n      this.$el.find('.carousel-item').each((el, i) => {\n        this.images.push(el);\n\n        if (this.showIndicators) {\n          let $indicator = $('<li class=\"indicator-item\"></li>'); // Add active to first by default.\n\n          if (i === 0) {\n            $indicator[0].classList.add('active');\n          }\n\n          this.$indicators.append($indicator);\n        }\n      });\n\n      if (this.showIndicators) {\n        this.$el.append(this.$indicators);\n      }\n\n      this.count = this.images.length; // Cap numVisible at count\n\n      this.options.numVisible = Math.min(this.count, this.options.numVisible); // Setup cross browser string\n\n      this.xform = 'transform';\n      ['webkit', 'Moz', 'O', 'ms'].every(prefix => {\n        var e = prefix + 'Transform';\n\n        if (typeof document.body.style[e] !== 'undefined') {\n          this.xform = e;\n          return false;\n        }\n\n        return true;\n      });\n\n      this._setupEventHandlers();\n\n      this._scroll(this.offset);\n    }\n\n    static get defaults() {\n      return _defaults;\n    }\n\n    static init(els, options) {\n      return super.init(this, els, options);\n    }\n    /**\n     * Get Instance\n     */\n\n\n    static getInstance(el) {\n      let domElem = !!el.jquery ? el[0] : el;\n      return domElem.M_Carousel;\n    }\n    /**\n     * Teardown component\n     */\n\n\n    destroy() {\n      this._removeEventHandlers();\n\n      this.el.M_Carousel = undefined;\n    }\n    /**\n     * Setup Event Handlers\n     */\n\n\n    _setupEventHandlers() {\n      this._handleCarouselTapBound = this._handleCarouselTap.bind(this);\n      this._handleCarouselDragBound = this._handleCarouselDrag.bind(this);\n      this._handleCarouselReleaseBound = this._handleCarouselRelease.bind(this);\n      this._handleCarouselClickBound = this._handleCarouselClick.bind(this);\n\n      if (typeof window.ontouchstart !== 'undefined') {\n        this.el.addEventListener('touchstart', this._handleCarouselTapBound);\n        this.el.addEventListener('touchmove', this._handleCarouselDragBound);\n        this.el.addEventListener('touchend', this._handleCarouselReleaseBound);\n      }\n\n      this.el.addEventListener('mousedown', this._handleCarouselTapBound);\n      this.el.addEventListener('mousemove', this._handleCarouselDragBound);\n      this.el.addEventListener('mouseup', this._handleCarouselReleaseBound);\n      this.el.addEventListener('mouseleave', this._handleCarouselReleaseBound);\n      this.el.addEventListener('click', this._handleCarouselClickBound);\n\n      if (this.showIndicators && this.$indicators) {\n        this._handleIndicatorClickBound = this._handleIndicatorClick.bind(this);\n        this.$indicators.find('.indicator-item').each((el, i) => {\n          el.addEventListener('click', this._handleIndicatorClickBound);\n        });\n      } // Resize\n\n\n      let throttledResize = M.throttle(this._handleResize, 200);\n      this._handleThrottledResizeBound = throttledResize.bind(this);\n      window.addEventListener('resize', this._handleThrottledResizeBound);\n    }\n    /**\n     * Remove Event Handlers\n     */\n\n\n    _removeEventHandlers() {\n      if (typeof window.ontouchstart !== 'undefined') {\n        this.el.removeEventListener('touchstart', this._handleCarouselTapBound);\n        this.el.removeEventListener('touchmove', this._handleCarouselDragBound);\n        this.el.removeEventListener('touchend', this._handleCarouselReleaseBound);\n      }\n\n      this.el.removeEventListener('mousedown', this._handleCarouselTapBound);\n      this.el.removeEventListener('mousemove', this._handleCarouselDragBound);\n      this.el.removeEventListener('mouseup', this._handleCarouselReleaseBound);\n      this.el.removeEventListener('mouseleave', this._handleCarouselReleaseBound);\n      this.el.removeEventListener('click', this._handleCarouselClickBound);\n\n      if (this.showIndicators && this.$indicators) {\n        this.$indicators.find('.indicator-item').each((el, i) => {\n          el.removeEventListener('click', this._handleIndicatorClickBound);\n        });\n      }\n\n      window.removeEventListener('resize', this._handleThrottledResizeBound);\n    }\n    /**\n     * Handle Carousel Tap\n     * @param {Event} e\n     */\n\n\n    _handleCarouselTap(e) {\n      // Fixes firefox draggable image bug\n      if (e.type === 'mousedown' && $(e.target).is('img')) {\n        e.preventDefault();\n      }\n\n      this.pressed = true;\n      this.dragged = false;\n      this.verticalDragged = false;\n      this.reference = this._xpos(e);\n      this.referenceY = this._ypos(e);\n      this.velocity = this.amplitude = 0;\n      this.frame = this.offset;\n      this.timestamp = Date.now();\n      clearInterval(this.ticker);\n      this.ticker = setInterval(this._trackBound, 100);\n    }\n    /**\n     * Handle Carousel Drag\n     * @param {Event} e\n     */\n\n\n    _handleCarouselDrag(e) {\n      let x, y, delta, deltaY;\n\n      if (this.pressed) {\n        x = this._xpos(e);\n        y = this._ypos(e);\n        delta = this.reference - x;\n        deltaY = Math.abs(this.referenceY - y);\n\n        if (deltaY < 30 && !this.verticalDragged) {\n          // If vertical scrolling don't allow dragging.\n          if (delta > 2 || delta < -2) {\n            this.dragged = true;\n            this.reference = x;\n\n            this._scroll(this.offset + delta);\n          }\n        } else if (this.dragged) {\n          // If dragging don't allow vertical scroll.\n          e.preventDefault();\n          e.stopPropagation();\n          return false;\n        } else {\n          // Vertical scrolling.\n          this.verticalDragged = true;\n        }\n      }\n\n      if (this.dragged) {\n        // If dragging don't allow vertical scroll.\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      }\n    }\n    /**\n     * Handle Carousel Release\n     * @param {Event} e\n     */\n\n\n    _handleCarouselRelease(e) {\n      if (this.pressed) {\n        this.pressed = false;\n      } else {\n        return;\n      }\n\n      clearInterval(this.ticker);\n      this.target = this.offset;\n\n      if (this.velocity > 10 || this.velocity < -10) {\n        this.amplitude = 0.9 * this.velocity;\n        this.target = this.offset + this.amplitude;\n      }\n\n      this.target = Math.round(this.target / this.dim) * this.dim; // No wrap of items.\n\n      if (this.noWrap) {\n        if (this.target >= this.dim * (this.count - 1)) {\n          this.target = this.dim * (this.count - 1);\n        } else if (this.target < 0) {\n          this.target = 0;\n        }\n      }\n\n      this.amplitude = this.target - this.offset;\n      this.timestamp = Date.now();\n      requestAnimationFrame(this._autoScrollBound);\n\n      if (this.dragged) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      return false;\n    }\n    /**\n     * Handle Carousel CLick\n     * @param {Event} e\n     */\n\n\n    _handleCarouselClick(e) {\n      // Disable clicks if carousel was dragged.\n      if (this.dragged) {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      } else if (!this.options.fullWidth) {\n        let clickedIndex = $(e.target).closest('.carousel-item').index();\n        let diff = this._wrap(this.center) - clickedIndex; // Disable clicks if carousel was shifted by click\n\n        if (diff !== 0) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n\n        this._cycleTo(clickedIndex);\n      }\n    }\n    /**\n     * Handle Indicator CLick\n     * @param {Event} e\n     */\n\n\n    _handleIndicatorClick(e) {\n      e.stopPropagation();\n      let indicator = $(e.target).closest('.indicator-item');\n\n      if (indicator.length) {\n        this._cycleTo(indicator.index());\n      }\n    }\n    /**\n     * Handle Throttle Resize\n     * @param {Event} e\n     */\n\n\n    _handleResize(e) {\n      if (this.options.fullWidth) {\n        this.itemWidth = this.$el.find('.carousel-item').first().innerWidth();\n        this.imageHeight = this.$el.find('.carousel-item.active').height();\n        this.dim = this.itemWidth * 2 + this.options.padding;\n        this.offset = this.center * 2 * this.itemWidth;\n        this.target = this.offset;\n\n        this._setCarouselHeight(true);\n      } else {\n        this._scroll();\n      }\n    }\n    /**\n     * Set carousel height based on first slide\n     * @param {Booleam} imageOnly - true for image slides\n     */\n\n\n    _setCarouselHeight(imageOnly) {\n      let firstSlide = this.$el.find('.carousel-item.active').length ? this.$el.find('.carousel-item.active').first() : this.$el.find('.carousel-item').first();\n      let firstImage = firstSlide.find('img').first();\n\n      if (firstImage.length) {\n        if (firstImage[0].complete) {\n          // If image won't trigger the load event\n          let imageHeight = firstImage.height();\n\n          if (imageHeight > 0) {\n            this.$el.css('height', imageHeight + 'px');\n          } else {\n            // If image still has no height, use the natural dimensions to calculate\n            let naturalWidth = firstImage[0].naturalWidth;\n            let naturalHeight = firstImage[0].naturalHeight;\n            let adjustedHeight = this.$el.width() / naturalWidth * naturalHeight;\n            this.$el.css('height', adjustedHeight + 'px');\n          }\n        } else {\n          // Get height when image is loaded normally\n          firstImage.one('load', (el, i) => {\n            this.$el.css('height', el.offsetHeight + 'px');\n          });\n        }\n      } else if (!imageOnly) {\n        let slideHeight = firstSlide.height();\n        this.$el.css('height', slideHeight + 'px');\n      }\n    }\n    /**\n     * Get x position from event\n     * @param {Event} e\n     */\n\n\n    _xpos(e) {\n      // touch event\n      if (e.targetTouches && e.targetTouches.length >= 1) {\n        return e.targetTouches[0].clientX;\n      } // mouse event\n\n\n      return e.clientX;\n    }\n    /**\n     * Get y position from event\n     * @param {Event} e\n     */\n\n\n    _ypos(e) {\n      // touch event\n      if (e.targetTouches && e.targetTouches.length >= 1) {\n        return e.targetTouches[0].clientY;\n      } // mouse event\n\n\n      return e.clientY;\n    }\n    /**\n     * Wrap index\n     * @param {Number} x\n     */\n\n\n    _wrap(x) {\n      return x >= this.count ? x % this.count : x < 0 ? this._wrap(this.count + x % this.count) : x;\n    }\n    /**\n     * Tracks scrolling information\n     */\n\n\n    _track() {\n      let now, elapsed, delta, v;\n      now = Date.now();\n      elapsed = now - this.timestamp;\n      this.timestamp = now;\n      delta = this.offset - this.frame;\n      this.frame = this.offset;\n      v = 1000 * delta / (1 + elapsed);\n      this.velocity = 0.8 * v + 0.2 * this.velocity;\n    }\n    /**\n     * Auto scrolls to nearest carousel item.\n     */\n\n\n    _autoScroll() {\n      let elapsed, delta;\n\n      if (this.amplitude) {\n        elapsed = Date.now() - this.timestamp;\n        delta = this.amplitude * Math.exp(-elapsed / this.options.duration);\n\n        if (delta > 2 || delta < -2) {\n          this._scroll(this.target - delta);\n\n          requestAnimationFrame(this._autoScrollBound);\n        } else {\n          this._scroll(this.target);\n        }\n      }\n    }\n    /**\n     * Scroll to target\n     * @param {Number} x\n     */\n\n\n    _scroll(x) {\n      // Track scrolling state\n      if (!this.$el.hasClass('scrolling')) {\n        this.el.classList.add('scrolling');\n      }\n\n      if (this.scrollingTimeout != null) {\n        window.clearTimeout(this.scrollingTimeout);\n      }\n\n      this.scrollingTimeout = window.setTimeout(() => {\n        this.$el.removeClass('scrolling');\n      }, this.options.duration); // Start actual scroll\n\n      let i, half, delta, dir, tween, el, alignment, zTranslation, tweenedOpacity, centerTweenedOpacity;\n      let lastCenter = this.center;\n      let numVisibleOffset = 1 / this.options.numVisible;\n      this.offset = typeof x === 'number' ? x : this.offset;\n      this.center = Math.floor((this.offset + this.dim / 2) / this.dim);\n      delta = this.offset - this.center * this.dim;\n      dir = delta < 0 ? 1 : -1;\n      tween = -dir * delta * 2 / this.dim;\n      half = this.count >> 1;\n\n      if (this.options.fullWidth) {\n        alignment = 'translateX(0)';\n        centerTweenedOpacity = 1;\n      } else {\n        alignment = 'translateX(' + (this.el.clientWidth - this.itemWidth) / 2 + 'px) ';\n        alignment += 'translateY(' + (this.el.clientHeight - this.itemHeight) / 2 + 'px)';\n        centerTweenedOpacity = 1 - numVisibleOffset * tween;\n      } // Set indicator active\n\n\n      if (this.showIndicators) {\n        let diff = this.center % this.count;\n        let activeIndicator = this.$indicators.find('.indicator-item.active');\n\n        if (activeIndicator.index() !== diff) {\n          activeIndicator.removeClass('active');\n          this.$indicators.find('.indicator-item').eq(diff)[0].classList.add('active');\n        }\n      } // center\n      // Don't show wrapped items.\n\n\n      if (!this.noWrap || this.center >= 0 && this.center < this.count) {\n        el = this.images[this._wrap(this.center)]; // Add active class to center item.\n\n        if (!$(el).hasClass('active')) {\n          this.$el.find('.carousel-item').removeClass('active');\n          el.classList.add('active');\n        }\n\n        let transformString = `${alignment} translateX(${-delta / 2}px) translateX(${dir * this.options.shift * tween * i}px) translateZ(${this.options.dist * tween}px)`;\n\n        this._updateItemStyle(el, centerTweenedOpacity, 0, transformString);\n      }\n\n      for (i = 1; i <= half; ++i) {\n        // right side\n        if (this.options.fullWidth) {\n          zTranslation = this.options.dist;\n          tweenedOpacity = i === half && delta < 0 ? 1 - tween : 1;\n        } else {\n          zTranslation = this.options.dist * (i * 2 + tween * dir);\n          tweenedOpacity = 1 - numVisibleOffset * (i * 2 + tween * dir);\n        } // Don't show wrapped items.\n\n\n        if (!this.noWrap || this.center + i < this.count) {\n          el = this.images[this._wrap(this.center + i)];\n          let transformString = `${alignment} translateX(${this.options.shift + (this.dim * i - delta) / 2}px) translateZ(${zTranslation}px)`;\n\n          this._updateItemStyle(el, tweenedOpacity, -i, transformString);\n        } // left side\n\n\n        if (this.options.fullWidth) {\n          zTranslation = this.options.dist;\n          tweenedOpacity = i === half && delta > 0 ? 1 - tween : 1;\n        } else {\n          zTranslation = this.options.dist * (i * 2 - tween * dir);\n          tweenedOpacity = 1 - numVisibleOffset * (i * 2 - tween * dir);\n        } // Don't show wrapped items.\n\n\n        if (!this.noWrap || this.center - i >= 0) {\n          el = this.images[this._wrap(this.center - i)];\n          let transformString = `${alignment} translateX(${-this.options.shift + (-this.dim * i - delta) / 2}px) translateZ(${zTranslation}px)`;\n\n          this._updateItemStyle(el, tweenedOpacity, -i, transformString);\n        }\n      } // center\n      // Don't show wrapped items.\n\n\n      if (!this.noWrap || this.center >= 0 && this.center < this.count) {\n        el = this.images[this._wrap(this.center)];\n        let transformString = `${alignment} translateX(${-delta / 2}px) translateX(${dir * this.options.shift * tween}px) translateZ(${this.options.dist * tween}px)`;\n\n        this._updateItemStyle(el, centerTweenedOpacity, 0, transformString);\n      } // onCycleTo callback\n\n\n      let $currItem = this.$el.find('.carousel-item').eq(this._wrap(this.center));\n\n      if (lastCenter !== this.center && typeof this.options.onCycleTo === 'function') {\n        this.options.onCycleTo.call(this, $currItem[0], this.dragged);\n      } // One time callback\n\n\n      if (typeof this.oneTimeCallback === 'function') {\n        this.oneTimeCallback.call(this, $currItem[0], this.dragged);\n        this.oneTimeCallback = null;\n      }\n    }\n    /**\n     * Cycle to target\n     * @param {Element} el\n     * @param {Number} opacity\n     * @param {Number} zIndex\n     * @param {String} transform\n     */\n\n\n    _updateItemStyle(el, opacity, zIndex, transform) {\n      el.style[this.xform] = transform;\n      el.style.zIndex = zIndex;\n      el.style.opacity = opacity;\n      el.style.visibility = 'visible';\n    }\n    /**\n     * Cycle to target\n     * @param {Number} n\n     * @param {Function} callback\n     */\n\n\n    _cycleTo(n, callback) {\n      let diff = this.center % this.count - n; // Account for wraparound.\n\n      if (!this.noWrap) {\n        if (diff < 0) {\n          if (Math.abs(diff + this.count) < Math.abs(diff)) {\n            diff += this.count;\n          }\n        } else if (diff > 0) {\n          if (Math.abs(diff - this.count) < diff) {\n            diff -= this.count;\n          }\n        }\n      }\n\n      this.target = this.dim * Math.round(this.offset / this.dim); // Next\n\n      if (diff < 0) {\n        this.target += this.dim * Math.abs(diff); // Prev\n      } else if (diff > 0) {\n        this.target -= this.dim * diff;\n      } // Set one time callback\n\n\n      if (typeof callback === 'function') {\n        this.oneTimeCallback = callback;\n      } // Scroll\n\n\n      if (this.offset !== this.target) {\n        this.amplitude = this.target - this.offset;\n        this.timestamp = Date.now();\n        requestAnimationFrame(this._autoScrollBound);\n      }\n    }\n    /**\n     * Cycle to next item\n     * @param {Number} [n]\n     */\n\n\n    next(n) {\n      if (n === undefined || isNaN(n)) {\n        n = 1;\n      }\n\n      let index = this.center + n;\n\n      if (index >= this.count || index < 0) {\n        if (this.noWrap) {\n          return;\n        }\n\n        index = this._wrap(index);\n      }\n\n      this._cycleTo(index);\n    }\n    /**\n     * Cycle to previous item\n     * @param {Number} [n]\n     */\n\n\n    prev(n) {\n      if (n === undefined || isNaN(n)) {\n        n = 1;\n      }\n\n      let index = this.center - n;\n\n      if (index >= this.count || index < 0) {\n        if (this.noWrap) {\n          return;\n        }\n\n        index = this._wrap(index);\n      }\n\n      this._cycleTo(index);\n    }\n    /**\n     * Cycle to nth item\n     * @param {Number} [n]\n     * @param {Function} callback\n     */\n\n\n    set(n, callback) {\n      if (n === undefined || isNaN(n)) {\n        n = 0;\n      }\n\n      if (n > this.count || n < 0) {\n        if (this.noWrap) {\n          return;\n        }\n\n        n = this._wrap(n);\n      }\n\n      this._cycleTo(n, callback);\n    }\n\n  }\n\n  M.Carousel = Carousel;\n\n  if (M.jQueryLoaded) {\n    M.initializeJqueryWrapper(Carousel, 'carousel', 'M_Carousel');\n  }\n})(cash);","map":{"version":3,"sources":["/Users/idetaisei/fitness_counter/client/node_modules/materialize-css/js/carousel.js"],"names":["$","_defaults","duration","dist","shift","padding","numVisible","fullWidth","indicators","noWrap","onCycleTo","Carousel","Component","constructor","el","options","M_Carousel","extend","defaults","hasMultipleSlides","$el","find","length","showIndicators","pressed","dragged","offset","target","images","itemWidth","first","innerWidth","itemHeight","innerHeight","dim","_autoScrollBound","_autoScroll","bind","_trackBound","_track","_setCarouselHeight","addClass","$indicators","each","i","push","$indicator","classList","add","append","count","Math","min","xform","every","prefix","e","document","body","style","_setupEventHandlers","_scroll","init","els","getInstance","domElem","jquery","destroy","_removeEventHandlers","undefined","_handleCarouselTapBound","_handleCarouselTap","_handleCarouselDragBound","_handleCarouselDrag","_handleCarouselReleaseBound","_handleCarouselRelease","_handleCarouselClickBound","_handleCarouselClick","window","ontouchstart","addEventListener","_handleIndicatorClickBound","_handleIndicatorClick","throttledResize","M","throttle","_handleResize","_handleThrottledResizeBound","removeEventListener","type","is","preventDefault","verticalDragged","reference","_xpos","referenceY","_ypos","velocity","amplitude","frame","timestamp","Date","now","clearInterval","ticker","setInterval","x","y","delta","deltaY","abs","stopPropagation","round","requestAnimationFrame","clickedIndex","closest","index","diff","_wrap","center","_cycleTo","indicator","imageHeight","height","imageOnly","firstSlide","firstImage","complete","css","naturalWidth","naturalHeight","adjustedHeight","width","one","offsetHeight","slideHeight","targetTouches","clientX","clientY","elapsed","v","exp","hasClass","scrollingTimeout","clearTimeout","setTimeout","removeClass","half","dir","tween","alignment","zTranslation","tweenedOpacity","centerTweenedOpacity","lastCenter","numVisibleOffset","floor","clientWidth","clientHeight","activeIndicator","eq","transformString","_updateItemStyle","$currItem","call","oneTimeCallback","opacity","zIndex","transform","visibility","n","callback","next","isNaN","prev","set","jQueryLoaded","initializeJqueryWrapper","cash"],"mappings":"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","sourcesContent":["(function($) {\n  'use strict';\n\n  let _defaults = {\n    duration: 200, // ms\n    dist: -100, // zoom scale TODO: make this more intuitive as an option\n    shift: 0, // spacing for center image\n    padding: 0, // Padding between non center items\n    numVisible: 5, // Number of visible items in carousel\n    fullWidth: false, // Change to full width styles\n    indicators: false, // Toggle indicators\n    noWrap: false, // Don't wrap around and cycle through items.\n    onCycleTo: null // Callback for when a new slide is cycled to.\n  };\n\n  /**\n   * @class\n   *\n   */\n  class Carousel extends Component {\n    /**\n     * Construct Carousel instance\n     * @constructor\n     * @param {Element} el\n     * @param {Object} options\n     */\n    constructor(el, options) {\n      super(Carousel, el, options);\n\n      this.el.M_Carousel = this;\n\n      /**\n       * Options for the carousel\n       * @member Carousel#options\n       * @prop {Number} duration\n       * @prop {Number} dist\n       * @prop {Number} shift\n       * @prop {Number} padding\n       * @prop {Number} numVisible\n       * @prop {Boolean} fullWidth\n       * @prop {Boolean} indicators\n       * @prop {Boolean} noWrap\n       * @prop {Function} onCycleTo\n       */\n      this.options = $.extend({}, Carousel.defaults, options);\n\n      // Setup\n      this.hasMultipleSlides = this.$el.find('.carousel-item').length > 1;\n      this.showIndicators = this.options.indicators && this.hasMultipleSlides;\n      this.noWrap = this.options.noWrap || !this.hasMultipleSlides;\n      this.pressed = false;\n      this.dragged = false;\n      this.offset = this.target = 0;\n      this.images = [];\n      this.itemWidth = this.$el\n        .find('.carousel-item')\n        .first()\n        .innerWidth();\n      this.itemHeight = this.$el\n        .find('.carousel-item')\n        .first()\n        .innerHeight();\n      this.dim = this.itemWidth * 2 + this.options.padding || 1; // Make sure dim is non zero for divisions.\n      this._autoScrollBound = this._autoScroll.bind(this);\n      this._trackBound = this._track.bind(this);\n\n      // Full Width carousel setup\n      if (this.options.fullWidth) {\n        this.options.dist = 0;\n        this._setCarouselHeight();\n\n        // Offset fixed items when indicators.\n        if (this.showIndicators) {\n          this.$el.find('.carousel-fixed-item').addClass('with-indicators');\n        }\n      }\n\n      // Iterate through slides\n      this.$indicators = $('<ul class=\"indicators\"></ul>');\n      this.$el.find('.carousel-item').each((el, i) => {\n        this.images.push(el);\n        if (this.showIndicators) {\n          let $indicator = $('<li class=\"indicator-item\"></li>');\n\n          // Add active to first by default.\n          if (i === 0) {\n            $indicator[0].classList.add('active');\n          }\n\n          this.$indicators.append($indicator);\n        }\n      });\n      if (this.showIndicators) {\n        this.$el.append(this.$indicators);\n      }\n      this.count = this.images.length;\n\n      // Cap numVisible at count\n      this.options.numVisible = Math.min(this.count, this.options.numVisible);\n\n      // Setup cross browser string\n      this.xform = 'transform';\n      ['webkit', 'Moz', 'O', 'ms'].every((prefix) => {\n        var e = prefix + 'Transform';\n        if (typeof document.body.style[e] !== 'undefined') {\n          this.xform = e;\n          return false;\n        }\n        return true;\n      });\n\n      this._setupEventHandlers();\n      this._scroll(this.offset);\n    }\n\n    static get defaults() {\n      return _defaults;\n    }\n\n    static init(els, options) {\n      return super.init(this, els, options);\n    }\n\n    /**\n     * Get Instance\n     */\n    static getInstance(el) {\n      let domElem = !!el.jquery ? el[0] : el;\n      return domElem.M_Carousel;\n    }\n\n    /**\n     * Teardown component\n     */\n    destroy() {\n      this._removeEventHandlers();\n      this.el.M_Carousel = undefined;\n    }\n\n    /**\n     * Setup Event Handlers\n     */\n    _setupEventHandlers() {\n      this._handleCarouselTapBound = this._handleCarouselTap.bind(this);\n      this._handleCarouselDragBound = this._handleCarouselDrag.bind(this);\n      this._handleCarouselReleaseBound = this._handleCarouselRelease.bind(this);\n      this._handleCarouselClickBound = this._handleCarouselClick.bind(this);\n\n      if (typeof window.ontouchstart !== 'undefined') {\n        this.el.addEventListener('touchstart', this._handleCarouselTapBound);\n        this.el.addEventListener('touchmove', this._handleCarouselDragBound);\n        this.el.addEventListener('touchend', this._handleCarouselReleaseBound);\n      }\n\n      this.el.addEventListener('mousedown', this._handleCarouselTapBound);\n      this.el.addEventListener('mousemove', this._handleCarouselDragBound);\n      this.el.addEventListener('mouseup', this._handleCarouselReleaseBound);\n      this.el.addEventListener('mouseleave', this._handleCarouselReleaseBound);\n      this.el.addEventListener('click', this._handleCarouselClickBound);\n\n      if (this.showIndicators && this.$indicators) {\n        this._handleIndicatorClickBound = this._handleIndicatorClick.bind(this);\n        this.$indicators.find('.indicator-item').each((el, i) => {\n          el.addEventListener('click', this._handleIndicatorClickBound);\n        });\n      }\n\n      // Resize\n      let throttledResize = M.throttle(this._handleResize, 200);\n      this._handleThrottledResizeBound = throttledResize.bind(this);\n\n      window.addEventListener('resize', this._handleThrottledResizeBound);\n    }\n\n    /**\n     * Remove Event Handlers\n     */\n    _removeEventHandlers() {\n      if (typeof window.ontouchstart !== 'undefined') {\n        this.el.removeEventListener('touchstart', this._handleCarouselTapBound);\n        this.el.removeEventListener('touchmove', this._handleCarouselDragBound);\n        this.el.removeEventListener('touchend', this._handleCarouselReleaseBound);\n      }\n      this.el.removeEventListener('mousedown', this._handleCarouselTapBound);\n      this.el.removeEventListener('mousemove', this._handleCarouselDragBound);\n      this.el.removeEventListener('mouseup', this._handleCarouselReleaseBound);\n      this.el.removeEventListener('mouseleave', this._handleCarouselReleaseBound);\n      this.el.removeEventListener('click', this._handleCarouselClickBound);\n\n      if (this.showIndicators && this.$indicators) {\n        this.$indicators.find('.indicator-item').each((el, i) => {\n          el.removeEventListener('click', this._handleIndicatorClickBound);\n        });\n      }\n\n      window.removeEventListener('resize', this._handleThrottledResizeBound);\n    }\n\n    /**\n     * Handle Carousel Tap\n     * @param {Event} e\n     */\n    _handleCarouselTap(e) {\n      // Fixes firefox draggable image bug\n      if (e.type === 'mousedown' && $(e.target).is('img')) {\n        e.preventDefault();\n      }\n      this.pressed = true;\n      this.dragged = false;\n      this.verticalDragged = false;\n      this.reference = this._xpos(e);\n      this.referenceY = this._ypos(e);\n\n      this.velocity = this.amplitude = 0;\n      this.frame = this.offset;\n      this.timestamp = Date.now();\n      clearInterval(this.ticker);\n      this.ticker = setInterval(this._trackBound, 100);\n    }\n\n    /**\n     * Handle Carousel Drag\n     * @param {Event} e\n     */\n    _handleCarouselDrag(e) {\n      let x, y, delta, deltaY;\n      if (this.pressed) {\n        x = this._xpos(e);\n        y = this._ypos(e);\n        delta = this.reference - x;\n        deltaY = Math.abs(this.referenceY - y);\n        if (deltaY < 30 && !this.verticalDragged) {\n          // If vertical scrolling don't allow dragging.\n          if (delta > 2 || delta < -2) {\n            this.dragged = true;\n            this.reference = x;\n            this._scroll(this.offset + delta);\n          }\n        } else if (this.dragged) {\n          // If dragging don't allow vertical scroll.\n          e.preventDefault();\n          e.stopPropagation();\n          return false;\n        } else {\n          // Vertical scrolling.\n          this.verticalDragged = true;\n        }\n      }\n\n      if (this.dragged) {\n        // If dragging don't allow vertical scroll.\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      }\n    }\n\n    /**\n     * Handle Carousel Release\n     * @param {Event} e\n     */\n    _handleCarouselRelease(e) {\n      if (this.pressed) {\n        this.pressed = false;\n      } else {\n        return;\n      }\n\n      clearInterval(this.ticker);\n      this.target = this.offset;\n      if (this.velocity > 10 || this.velocity < -10) {\n        this.amplitude = 0.9 * this.velocity;\n        this.target = this.offset + this.amplitude;\n      }\n      this.target = Math.round(this.target / this.dim) * this.dim;\n\n      // No wrap of items.\n      if (this.noWrap) {\n        if (this.target >= this.dim * (this.count - 1)) {\n          this.target = this.dim * (this.count - 1);\n        } else if (this.target < 0) {\n          this.target = 0;\n        }\n      }\n      this.amplitude = this.target - this.offset;\n      this.timestamp = Date.now();\n      requestAnimationFrame(this._autoScrollBound);\n\n      if (this.dragged) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n      return false;\n    }\n\n    /**\n     * Handle Carousel CLick\n     * @param {Event} e\n     */\n    _handleCarouselClick(e) {\n      // Disable clicks if carousel was dragged.\n      if (this.dragged) {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      } else if (!this.options.fullWidth) {\n        let clickedIndex = $(e.target)\n          .closest('.carousel-item')\n          .index();\n        let diff = this._wrap(this.center) - clickedIndex;\n\n        // Disable clicks if carousel was shifted by click\n        if (diff !== 0) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n        this._cycleTo(clickedIndex);\n      }\n    }\n\n    /**\n     * Handle Indicator CLick\n     * @param {Event} e\n     */\n    _handleIndicatorClick(e) {\n      e.stopPropagation();\n\n      let indicator = $(e.target).closest('.indicator-item');\n      if (indicator.length) {\n        this._cycleTo(indicator.index());\n      }\n    }\n\n    /**\n     * Handle Throttle Resize\n     * @param {Event} e\n     */\n    _handleResize(e) {\n      if (this.options.fullWidth) {\n        this.itemWidth = this.$el\n          .find('.carousel-item')\n          .first()\n          .innerWidth();\n        this.imageHeight = this.$el.find('.carousel-item.active').height();\n        this.dim = this.itemWidth * 2 + this.options.padding;\n        this.offset = this.center * 2 * this.itemWidth;\n        this.target = this.offset;\n        this._setCarouselHeight(true);\n      } else {\n        this._scroll();\n      }\n    }\n\n    /**\n     * Set carousel height based on first slide\n     * @param {Booleam} imageOnly - true for image slides\n     */\n    _setCarouselHeight(imageOnly) {\n      let firstSlide = this.$el.find('.carousel-item.active').length\n        ? this.$el.find('.carousel-item.active').first()\n        : this.$el.find('.carousel-item').first();\n      let firstImage = firstSlide.find('img').first();\n      if (firstImage.length) {\n        if (firstImage[0].complete) {\n          // If image won't trigger the load event\n          let imageHeight = firstImage.height();\n          if (imageHeight > 0) {\n            this.$el.css('height', imageHeight + 'px');\n          } else {\n            // If image still has no height, use the natural dimensions to calculate\n            let naturalWidth = firstImage[0].naturalWidth;\n            let naturalHeight = firstImage[0].naturalHeight;\n            let adjustedHeight = this.$el.width() / naturalWidth * naturalHeight;\n            this.$el.css('height', adjustedHeight + 'px');\n          }\n        } else {\n          // Get height when image is loaded normally\n          firstImage.one('load', (el, i) => {\n            this.$el.css('height', el.offsetHeight + 'px');\n          });\n        }\n      } else if (!imageOnly) {\n        let slideHeight = firstSlide.height();\n        this.$el.css('height', slideHeight + 'px');\n      }\n    }\n\n    /**\n     * Get x position from event\n     * @param {Event} e\n     */\n    _xpos(e) {\n      // touch event\n      if (e.targetTouches && e.targetTouches.length >= 1) {\n        return e.targetTouches[0].clientX;\n      }\n\n      // mouse event\n      return e.clientX;\n    }\n\n    /**\n     * Get y position from event\n     * @param {Event} e\n     */\n    _ypos(e) {\n      // touch event\n      if (e.targetTouches && e.targetTouches.length >= 1) {\n        return e.targetTouches[0].clientY;\n      }\n\n      // mouse event\n      return e.clientY;\n    }\n\n    /**\n     * Wrap index\n     * @param {Number} x\n     */\n    _wrap(x) {\n      return x >= this.count ? x % this.count : x < 0 ? this._wrap(this.count + x % this.count) : x;\n    }\n\n    /**\n     * Tracks scrolling information\n     */\n    _track() {\n      let now, elapsed, delta, v;\n\n      now = Date.now();\n      elapsed = now - this.timestamp;\n      this.timestamp = now;\n      delta = this.offset - this.frame;\n      this.frame = this.offset;\n\n      v = 1000 * delta / (1 + elapsed);\n      this.velocity = 0.8 * v + 0.2 * this.velocity;\n    }\n\n    /**\n     * Auto scrolls to nearest carousel item.\n     */\n    _autoScroll() {\n      let elapsed, delta;\n\n      if (this.amplitude) {\n        elapsed = Date.now() - this.timestamp;\n        delta = this.amplitude * Math.exp(-elapsed / this.options.duration);\n        if (delta > 2 || delta < -2) {\n          this._scroll(this.target - delta);\n          requestAnimationFrame(this._autoScrollBound);\n        } else {\n          this._scroll(this.target);\n        }\n      }\n    }\n\n    /**\n     * Scroll to target\n     * @param {Number} x\n     */\n    _scroll(x) {\n      // Track scrolling state\n      if (!this.$el.hasClass('scrolling')) {\n        this.el.classList.add('scrolling');\n      }\n      if (this.scrollingTimeout != null) {\n        window.clearTimeout(this.scrollingTimeout);\n      }\n      this.scrollingTimeout = window.setTimeout(() => {\n        this.$el.removeClass('scrolling');\n      }, this.options.duration);\n\n      // Start actual scroll\n      let i,\n        half,\n        delta,\n        dir,\n        tween,\n        el,\n        alignment,\n        zTranslation,\n        tweenedOpacity,\n        centerTweenedOpacity;\n      let lastCenter = this.center;\n      let numVisibleOffset = 1 / this.options.numVisible;\n\n      this.offset = typeof x === 'number' ? x : this.offset;\n      this.center = Math.floor((this.offset + this.dim / 2) / this.dim);\n      delta = this.offset - this.center * this.dim;\n      dir = delta < 0 ? 1 : -1;\n      tween = -dir * delta * 2 / this.dim;\n      half = this.count >> 1;\n\n      if (this.options.fullWidth) {\n        alignment = 'translateX(0)';\n        centerTweenedOpacity = 1;\n      } else {\n        alignment = 'translateX(' + (this.el.clientWidth - this.itemWidth) / 2 + 'px) ';\n        alignment += 'translateY(' + (this.el.clientHeight - this.itemHeight) / 2 + 'px)';\n        centerTweenedOpacity = 1 - numVisibleOffset * tween;\n      }\n\n      // Set indicator active\n      if (this.showIndicators) {\n        let diff = this.center % this.count;\n        let activeIndicator = this.$indicators.find('.indicator-item.active');\n        if (activeIndicator.index() !== diff) {\n          activeIndicator.removeClass('active');\n          this.$indicators\n            .find('.indicator-item')\n            .eq(diff)[0]\n            .classList.add('active');\n        }\n      }\n\n      // center\n      // Don't show wrapped items.\n      if (!this.noWrap || (this.center >= 0 && this.center < this.count)) {\n        el = this.images[this._wrap(this.center)];\n\n        // Add active class to center item.\n        if (!$(el).hasClass('active')) {\n          this.$el.find('.carousel-item').removeClass('active');\n          el.classList.add('active');\n        }\n        let transformString = `${alignment} translateX(${-delta / 2}px) translateX(${dir *\n          this.options.shift *\n          tween *\n          i}px) translateZ(${this.options.dist * tween}px)`;\n        this._updateItemStyle(el, centerTweenedOpacity, 0, transformString);\n      }\n\n      for (i = 1; i <= half; ++i) {\n        // right side\n        if (this.options.fullWidth) {\n          zTranslation = this.options.dist;\n          tweenedOpacity = i === half && delta < 0 ? 1 - tween : 1;\n        } else {\n          zTranslation = this.options.dist * (i * 2 + tween * dir);\n          tweenedOpacity = 1 - numVisibleOffset * (i * 2 + tween * dir);\n        }\n        // Don't show wrapped items.\n        if (!this.noWrap || this.center + i < this.count) {\n          el = this.images[this._wrap(this.center + i)];\n          let transformString = `${alignment} translateX(${this.options.shift +\n            (this.dim * i - delta) / 2}px) translateZ(${zTranslation}px)`;\n          this._updateItemStyle(el, tweenedOpacity, -i, transformString);\n        }\n\n        // left side\n        if (this.options.fullWidth) {\n          zTranslation = this.options.dist;\n          tweenedOpacity = i === half && delta > 0 ? 1 - tween : 1;\n        } else {\n          zTranslation = this.options.dist * (i * 2 - tween * dir);\n          tweenedOpacity = 1 - numVisibleOffset * (i * 2 - tween * dir);\n        }\n        // Don't show wrapped items.\n        if (!this.noWrap || this.center - i >= 0) {\n          el = this.images[this._wrap(this.center - i)];\n          let transformString = `${alignment} translateX(${-this.options.shift +\n            (-this.dim * i - delta) / 2}px) translateZ(${zTranslation}px)`;\n          this._updateItemStyle(el, tweenedOpacity, -i, transformString);\n        }\n      }\n\n      // center\n      // Don't show wrapped items.\n      if (!this.noWrap || (this.center >= 0 && this.center < this.count)) {\n        el = this.images[this._wrap(this.center)];\n        let transformString = `${alignment} translateX(${-delta / 2}px) translateX(${dir *\n          this.options.shift *\n          tween}px) translateZ(${this.options.dist * tween}px)`;\n        this._updateItemStyle(el, centerTweenedOpacity, 0, transformString);\n      }\n\n      // onCycleTo callback\n      let $currItem = this.$el.find('.carousel-item').eq(this._wrap(this.center));\n      if (lastCenter !== this.center && typeof this.options.onCycleTo === 'function') {\n        this.options.onCycleTo.call(this, $currItem[0], this.dragged);\n      }\n\n      // One time callback\n      if (typeof this.oneTimeCallback === 'function') {\n        this.oneTimeCallback.call(this, $currItem[0], this.dragged);\n        this.oneTimeCallback = null;\n      }\n    }\n\n    /**\n     * Cycle to target\n     * @param {Element} el\n     * @param {Number} opacity\n     * @param {Number} zIndex\n     * @param {String} transform\n     */\n    _updateItemStyle(el, opacity, zIndex, transform) {\n      el.style[this.xform] = transform;\n      el.style.zIndex = zIndex;\n      el.style.opacity = opacity;\n      el.style.visibility = 'visible';\n    }\n\n    /**\n     * Cycle to target\n     * @param {Number} n\n     * @param {Function} callback\n     */\n    _cycleTo(n, callback) {\n      let diff = this.center % this.count - n;\n\n      // Account for wraparound.\n      if (!this.noWrap) {\n        if (diff < 0) {\n          if (Math.abs(diff + this.count) < Math.abs(diff)) {\n            diff += this.count;\n          }\n        } else if (diff > 0) {\n          if (Math.abs(diff - this.count) < diff) {\n            diff -= this.count;\n          }\n        }\n      }\n\n      this.target = this.dim * Math.round(this.offset / this.dim);\n      // Next\n      if (diff < 0) {\n        this.target += this.dim * Math.abs(diff);\n\n        // Prev\n      } else if (diff > 0) {\n        this.target -= this.dim * diff;\n      }\n\n      // Set one time callback\n      if (typeof callback === 'function') {\n        this.oneTimeCallback = callback;\n      }\n\n      // Scroll\n      if (this.offset !== this.target) {\n        this.amplitude = this.target - this.offset;\n        this.timestamp = Date.now();\n        requestAnimationFrame(this._autoScrollBound);\n      }\n    }\n\n    /**\n     * Cycle to next item\n     * @param {Number} [n]\n     */\n    next(n) {\n      if (n === undefined || isNaN(n)) {\n        n = 1;\n      }\n\n      let index = this.center + n;\n      if (index >= this.count || index < 0) {\n        if (this.noWrap) {\n          return;\n        }\n\n        index = this._wrap(index);\n      }\n      this._cycleTo(index);\n    }\n\n    /**\n     * Cycle to previous item\n     * @param {Number} [n]\n     */\n    prev(n) {\n      if (n === undefined || isNaN(n)) {\n        n = 1;\n      }\n\n      let index = this.center - n;\n      if (index >= this.count || index < 0) {\n        if (this.noWrap) {\n          return;\n        }\n\n        index = this._wrap(index);\n      }\n\n      this._cycleTo(index);\n    }\n\n    /**\n     * Cycle to nth item\n     * @param {Number} [n]\n     * @param {Function} callback\n     */\n    set(n, callback) {\n      if (n === undefined || isNaN(n)) {\n        n = 0;\n      }\n\n      if (n > this.count || n < 0) {\n        if (this.noWrap) {\n          return;\n        }\n\n        n = this._wrap(n);\n      }\n\n      this._cycleTo(n, callback);\n    }\n  }\n\n  M.Carousel = Carousel;\n\n  if (M.jQueryLoaded) {\n    M.initializeJqueryWrapper(Carousel, 'carousel', 'M_Carousel');\n  }\n})(cash);\n"]},"metadata":{},"sourceType":"script"}